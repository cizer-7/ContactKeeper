const { PrismaClient } = require('@prisma/client'); const prisma = new PrismaClient(); async function main() { const clients = await prisma.client.findMany({ orderBy: { name: 'asc' }, include: { _count: { select: { contacts: true } }, contacts: { where: { hasPortal: true }, take: 1, select: { portalUrl: true, portalUser: true, portalPass: true } } } }); const client = clients.find(c => c.name === 'Portal Test Client'); console.log(JSON.stringify(client, null, 2)); } main();
